<!doctype html><html lang="en"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Aqua Real Estate — TEST</title>
<style>body{font-family:system-ui;margin:0;background:#f8fafc;color:#0f172a}
.wrap{max-width:820px;margin:0 auto;padding:24px}
.card{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:16px;margin:16px 0}
.row{display:flex;gap:8px;flex-wrap:wrap}
input,button{font:inherit} input{padding:8px;border:1px solid #e2e8f0;border-radius:8px}
button{padding:8px 12px;border-radius:8px;border:0;background:#0ea5a5;color:#fff;font-weight:700}
.chat{display:flex;flex-direction:column;gap:8px;max-height:220px;overflow:auto;margin:8px 0}
.bubble{padding:8px 10px;border:1px solid #e2e8f0;border-radius:10px;background:#fff;max-width:80%}
.me{align-self:flex-end;background:#ecfeff}
</style>
<div class="wrap">
  <h1>Smarter Home Buying with AI + Savings</h1>
  <p style="color:#475569;margin-top:0">You should see: this line, a calculator card, and a chat card.</p>

  <section class="card" id="calc">
    <h2>Buyer-Savings Calculator</h2>
    <div class="row">
      <label>Home Price <input id="price" type="number" value="900000"></label>
      <label>Share (0–1) <input id="share" type="number" step="0.05" value="0.3"></label>
    </div>
    <p id="savings" style="font-weight:700;font-size:20px;margin:8px 0 0"></p>
  </section>

  <section class="card" id="chat">
    <h2>AI Home Assistant</h2>
    <div id="chatbox" class="chat"></div>
    <div class="row">
      <input id="input" placeholder="Ask about Bellevue vs Sammamish…" style="flex:1;min-width:220px">
      <button id="send">Send</button>
    </div>
  </section>

  <p style="font-size:12px;color:#64748b">If you can read all sections, the page is fixed ✅</p>
</div>
<script>
const P=document.getElementById('price'), S=document.getElementById('share'), O=document.getElementById('savings');
function r(){const p=+P.value||0, s=Math.max(0,Math.min(1,+S.value||0)); O.textContent='$'+(p*0.025*s).toLocaleString()+' estimated savings';}
P.oninput=S.oninput=r; r();
const C=document.getElementById('chatbox'), I=document.getElementById('input'); function b(role,t){const d=document.createElement('div'); d.className='bubble'+(role==='user'?' me':''); d.textContent=t; C.appendChild(d); C.scrollTop=C.scrollHeight;}
b('assistant','Hi! I can compare areas, estimate savings, and plan your search.');
async function send(){const t=I.value.trim(); if(!t) return; b('user',t); I.value=''; try{const res=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:[{role:'user',content:t}]})}); const j=await res.json(); b('assistant', j.reply||'Try again later.');}catch{b('assistant','Network error — please try again.');}}
document.getElementById('send').onclick=send; I.addEventListener('keydown',e=>{if(e.key==='Enter')send();});
</script>
